--STORED PROCEDURE  for CALCULATING TOTAL FINE CALCULATED BY LIBRARY :
CREATE OR REPLACE FUNCTION FIND_TOTAL_FINE()
RETURNS INTEGER AS $BODY$
DECLARE 
SUM INTEGER=0;
FINE record;
BEGIN

FOR FINE IN SELECT * FROM ISSUE_RETURN 
LOOP
	IF(FINE.APPLICABLE_FINE IS NOT NULL)
	then
		SUM=SUM+FINE.APPLICABLE_FINE;
	END IF;
END LOOP;
RETURN SUM;
END $BODY$ LANGUAGE 'plpgsql';


select find_total_fine();