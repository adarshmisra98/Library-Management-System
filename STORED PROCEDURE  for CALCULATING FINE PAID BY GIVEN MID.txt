--STORED PROCEDURE  for CALCULATING FINE PAID BY GIVEN MEMEBER :
CREATE OR REPLACE FUNCTION PENDINGFINE(MIDD INTEGER)
RETURNS INTEGER AS $BODY$
DECLARE 
SUM INTEGER:=0;
LOAN record;
FINEE record;
BEGIN

FOR FINEE IN SELECT * FROM ISSUE_RETURN
LOOP
	if FINEE.MID=MIDD
	then
		FOR LOAN IN SELECT * FROM LOAN_DETAILS
		loop 
			if FINEE.MID=LOAN.MID
			then
				SUM=SUM+FINEE.APPLICABLE_FINE;
			end if;
		END LOOP;
	end if;
END LOOP;
RETURN SUM; 
END $BODY$ LANGUAGE 'plpgsql';

FUNCTION CALL:

--FINDTOTALFINE